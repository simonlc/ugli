<head>
  <title>UGLI</title>
</head>

<body>
  {{> top_bar}}
  <div id="remainder">
    {{#if logged_in}}
      {{> main_content}}
    {{else}}
      {{> signed_out_message}}
    {{/if}}
  </div>
  {{> create_game_modal}}
</body>

<template name="top_bar">
  <div id="top-bar" class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand">UGLI</a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          {{#if logged_in}}
            <li><a>{{> loginButtons}}</a></li>
          {{/if}}
        </ul>
      </div>
    </div>
  </div>
</template>

<template name="main_content">
  <div id="main-content" class="row">
    <div id="left-content" class="col-md-8">
      {{> game_info}}
      {{> chat_box }}
    </div>
    <div id="right-content" class="col-md-4">
      {{> menu_box }}
      {{> player_list }}
    </div>
  </div>
</template>

<template name="game_info">
  <div id="game-info" class="panel panel-info">
    <div class="panel-heading">
      <h4 class="panel-title">Games</h4>
    </div>
    <div class="panel-body">
      {{#if show_game_details}}
        {{> game_details}}
      {{else}}
        {{> game_list}}
      {{/if}}
    </div>
  </div>
</template>

<template name="game_details">
  <div id="game-details">
    {{#with game}}
      <h3 class="name">{{name}}</h3>
      <div class="host">Hosted by {{summary.host}}</div>
      <div class="left-details">
        <div class="details-player-list panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">Players</h4>
          </div>
          <div class="panel-body">
            {{#each players}}
              <div class="player-row">{{this}}</div>
            {{/each}}
            {{#each empty_spots}}
              <div class="player-row">(empty seat)</div>
            {{/each}}
          </div>
        </div>
      </div>
      <div class="right-details">
        <h4 class="description">{{summary.description}}</h4>
        <div class="explanation">
          Start at 100 points and clear lines as fast as possible.
          The first person to 200 points wins!
        </div>
      </div>
      <div class="details-controls">
        <a class="back-to-list btn btn-sm btn-default">Back to game list</a>
        <a class="join-game btn btn-sm btn-primary">Join this game</a>
      </div>
    {{/with}}
  </div>
</template>

<template name="game_list">
  {{#with games}}
    <table class="table table-hover">
      <thead>
        <tr>
          <th class="name">Name</th>
          <th class="host">Host</th>
          <th class="description">Rules</th>
          <th class="status">Status</th>
        </tr>
      </thead>
      <tbody>
        {{#each this}}
          <tr class="buttonlike">
            <td class="name">{{name}}</td>
            <td class="host">{{summary.host}}</td>
            <td class="description">{{summary.description}}</td>
            <td class="status">
              {{state}} ({{players.length}}/{{summary.max_players}})
            </td>
          </tr>
        {{/each}}
      </tbody>
    </table>
    {{#if count}}
      <div class="pagination-wrapper">
        <ul class="pagination pagination-sm buttonlike">
          {{#each pagination}}
            <li class="{{class}}"><a>{{text}}</a></li>
          {{/each}}
        </ul>
      </div>
    {{else}}
      <div class="no-games-message">
        There are no games. Use the menu to the right to create one.
      </div>
    {{/if}}
  {{/with}}
</template>

<template name="chat_box">
  <div id="chat-box" class="panel panel-warning">
    <div class="panel-heading">
      <h4 class="panel-title">Chat</h4>
    </div>
    <ul id="chat-message-list" class="panel-body">
      {{#each chats}}
        <li class="chat-message">
          <div class="chat-sender">{{sender}}:</div>
          {{message}}
        </li>
      {{/each}}
    </ul>
    <div class="panel-footer">
      <div class="chat-left">Enter a message:</div>
      <div class="chat-input-wrapper">
        <input id="chat-input" type="text">
      </div>
    </div>
  </div>
</template>

<template name="menu_box">
  <div id="menu-box" class="panel panel-success">
    <div class="panel-heading">
      <h4 class="panel-title">Menu</h4>
    </div>
    <div class="panel-body">
      <div class="btn-wrapper">
        <a class="create-game btn btn-sm btn-primary">Create game</a>
      </div>
      <div class="btn-wrapper">
        <a class="show-options btn btn-sm btn-default">Options</a>
      </div>
      <div class="btn-wrapper">
        <a class="show-about btn btn-sm btn-default">About UGLI</a>
      </div>
    </div>
  </div>
</template>

<template name="player_list">
  <div id="player-list" class="panel panel-primary">
    <div class="panel-heading">
      <h4 class="panel-title">Players</h4>
    </div>
    <div class="panel-body">
      <div class="player-row">{{num_players}} {{player_str}} online</div>
      {{#each players}}
        <div class="player-row">{{this}}</div>
      {{/each}}
    </div>
  </div>
</template>

<template name="signed_out_message">
  <div id="signed-out-message">
    {{> loginButtons}} to play a game on UGLI.
  </div>
</template>

<template name="create_game_modal">
  <div id="create-game-modal" class="ugli-modal modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4>Create game</h4>
        </div>
        <div class="modal-body"></div>
        <div class="modal-footer">
          <a class="cancel btn btn-sm btn-default">Cancel</a>
          <a class="ok btn btn-sm btn-primary">Ok</a>
        </div>
      </div>
    </div>
  </div>
</template>
